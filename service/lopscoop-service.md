   重构，为什么要重构?面对日益增长的用户量以及产品业务的不断发展,系统目前的架构完全支撑不了。
   截止目前系统的主要压力来自于数据库以及缓存的压力,以及接口的不合理(针对业务需要的不断变化)
   坑也就在不断的追赶业务中进行增加，为了业务的继续发展，系统需要重构

   假如 系统拆成微服务架构,问题来了
   1. 但是配套的配置系统，服务治理系统是不是也要跟上？这个比较纠结
   2. 系统拆分以具体的业务模块进行拆分呢？
       内容? 用户? 活动?
   3. 数据库是否也需要进行拆分? 
   4. 缓存的服务是否需要进行管理?
   5. 如果都拆成服务,那就会引入rpc进行服务内部调用

  ## 拆分
  ### 业务
  ### 服务
  ### 资源

  ## 接口
  ### 请求
   1. 客户端避免重复请求
   2. 基础数据请求控制在一次，或者每天几次，最好是服务器端进行通知客户端有改动然后进行拉取新的配置
   3. 综合请求数据

  ### 关于请求接口的次数与返回值大小的取舍
      请求次数很少 一定会好么？
      同样如果返回值太大也一定不好么？
      1· 这取决于服务器的运行情况，
         如果整体请求量很大，那么可以适当的降低请求次数
         如果整体请求量不大，那么就不用纠结返回值的大小
      2.
         取决于用户使用数据的频次
         频次划分
         少量 1-3 学历、兴趣列表、印度联邦列表、app策略配置
         中等 10-20 公告列表、广告策略配置、
         大量 20-100 
         

  ## 测试
  ### 单元测试
  ### 性能测试
  ### 端到端测试
  ### 功能测试
  ### 其他
    1. 权衡
    2. 比例  

 ### design
   目标 减少数据库的query,减少单表的存储量,代码更容易维护,迭代更加快速
   1. 用户信息是否可以拆成两个表
      基本的用户信息+具体的用户详细信息
   2. 业务需要缩减,重复的策略会影响用户的选择   

 ### 缓存
   1. 内存相关
      key 的数量、value的大小、key的过期时间
   2. 缓存的效率相关
      key的更新频率、key的命中率
   3、缓存与数据库的一致性要求
   4、单个key的占用内存大小 单个value的内存占用大小
   5、线上的缓存服务器大小控制在多少？ 6G? 32G?

### 新版本重点关注的地方
    1. 统计
       监控、用户行为分析  
    2. 日常数据的记录与备份
       对于增量数据，可以进行完全备份 按天或者按月
       对于存量数据，尽量优化数据结构，便于查询，新增，或者修改
    3. 接口响应的速度，安全性，独立性
    4. 缓存的结构设计
    5. 代码的复用性，清晰化，模块化
### 老版本的问题
    1. 接口混乱
    2. 缓存使用不合理
       不规范
    3. 数据库设计不合理
    4. 代码冗余太多
    5. 后台不够人性化 统计不够完善
    6. 扩展不够灵活 
    7. 迭代速度慢
    8. 发布痛苦
    9. 接口服务版本难控制
    10. 接口发布更新版本没有记录
    11. 测试不够方便

### 目标以及计划
    1. 接口更加的合理
        具体的落实点在哪？
        1. 参数、返回值合理
        2. 接口无状态
        3. 安全
        4. 灵活
        5. 接口文档的后续维护
        6. 接口需求的文档化
    2. 服务可用化、稳定性提高
    3. 数据库更加方便扩展
    4. 代码的可维护性提高
    
    